<?xml version="1.0" encoding="UTF-8"?>
<jobs xmlns="http://www.demandware.com/xml/impex/jobs/2015-07-01">
    <job job-id="Process" priority="0">
        <description/>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="RefArch"/>
                <template-ref template-id="template_48"/>
            </flow>
            <flow-template template-id="template_48">
                <step step-id="Process" type="ExecuteScriptModule" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_adyen_SFRA/cartridge/adyen/webhooks/job/notifications.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">processNotifications</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                        <parameter name="ExecuteScriptModule.TimeoutInSeconds">3600</parameter>
                    </parameters>
                </step>
                <step step-id="Clean" type="ExecuteScriptModule" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_adyen_SFRA/cartridge/adyen/webhooks/job/notifications.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">clearNotifications</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                        <parameter name="ExecuteScriptModule.TimeoutInSeconds">3600</parameter>
                    </parameters>
                </step>
                <step step-id="ProcessSiteImport" type="ExecuteScriptModule" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_adyen_SFRA/cartridge/adyen/analytics/configurationTime.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">execute</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                        <parameter name="ExecuteScriptModule.TimeoutInSeconds">3600</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="true">
                <date>2018-03-01Z</date>
                <time>18:55:46.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="ProcessAnalytics" priority="0">
        <description/>
        <parameters/>
        <split sequential="true">
            <flow>
                <context site-id="RefArch"/>
                <template-ref template-id="template_48"/>
            </flow>
            <flow-template template-id="template_48">
                <step step-id="Process" type="ExecuteScriptModule" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_adyen_SFRA/cartridge/adyen/analytics/job/analyticsJob.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">processAnalytics</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                        <parameter name="ExecuteScriptModule.TimeoutInSeconds">3600</parameter>
                    </parameters>
                    <rules>
                        <on-exit status="*">
                            <continue next-step="Clean"/>
                        </on-exit>
                    </rules>
                </step>
                <step step-id="Clean" type="ExecuteScriptModule" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_adyen_SFRA/cartridge/adyen/analytics/job/analyticsJob.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">clearAnalytics</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                        <parameter name="ExecuteScriptModule.TimeoutInSeconds">3600</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <triggers>
            <run-recurring enabled="true">
            <recurrence>
                <date-from>2024-11-04</date-from>
                <start-time>00:00:00</start-time>
                <interval>1m</interval>
            </recurrence>
            <rules>
                <on-exit status="ERROR">
                    <retry>
                        <interval>10m</interval>
                        <max-retries>3</max-retries>
                    </retry>
                </on-exit>
            </rules>
            </run-recurring>
        </triggers>
    </job>
</jobs>
